var version=function(e,t,l,a,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(t),i=r(l);const c="pseudoConfigIcon",d={DATA_LAST_FETCHED:{en:"Data last fetched",nb:"Data sist hentet"},FILTER_TABLE:{en:"Filter table",nb:"Filtrere tabellen"},HEADER:{en:"Catalog Viewer",nb:"Katalogvisning"},PATH:{en:"Path",nb:"Sti"},PSEUDO_CONFIG:{en:"Pseudo config",nb:"Pseudo config"},REFRESH_TABLE:{en:"Fetch data again",nb:"Hent data pÃ¥ nytt"},STATE:{en:"State",nb:"Tilstand"},TIMESTAMP:{en:"Timestamp",nb:"Dato"},TYPE:{en:"Type",nb:"Type"},VALUATION:{en:"Valuation",nb:"Verdivurdering"}};function u({error:e,loading:t,filterBy:l,language:r,setFilterBy:i,refetch:c,fetchTime:u}){return o.default.createElement(a.Grid,{columns:"equal"},o.default.createElement(a.Grid.Column,null,o.default.createElement(a.Input,{fluid:!0,size:"large",icon:"search",value:l,disabled:t||!!e,placeholder:d.FILTER_TABLE[r],onChange:(e,{value:t})=>i(t)})),o.default.createElement(a.Grid.Column,null),o.default.createElement(a.Grid.Column,null),o.default.createElement(a.Grid.Column,{textAlign:"right",verticalAlign:"middle"},o.default.createElement(n.InfoPopup,{position:"left center",text:d.REFRESH_TABLE[r],trigger:o.default.createElement(a.Icon,{link:!0,name:"sync",size:"large",onClick:c,loading:t,disabled:t,style:{color:n.SSB_COLORS.BLUE}})}),`${d.DATA_LAST_FETCHED[r]}: ${t?"-":u}`))}function E({commonPrefixes:e,length:t,setFilterBy:l}){return o.default.createElement(o.default.Fragment,null,e.map((e=>o.default.createElement(a.Label,{as:"a",size:"large",key:e[0],onClick:()=>l(`/${e[0]}/`),style:{backgroundColor:n.SSB_COLORS.BLUE,marginRight:"1rem"}},`/${e[0]}`,o.default.createElement(a.Label.Detail,null,`(${e[1]})`)))),o.default.createElement(a.Label,{as:"a",size:"large",onClick:()=>l(""),style:{backgroundColor:n.SSB_COLORS.BLUE}},"/",o.default.createElement(a.Label.Detail,null,`(${t})`)))}function T({catalog:e,pseudoConfig:l,language:r}){const[i,u]=t.useState(!1);return"object"==typeof l&&null!==l&&0!==Object.keys(l).length?o.default.createElement(a.Modal,{closeIcon:!0,size:"large",open:i,style:n.SSB_STYLE,onClose:()=>u(!1),trigger:o.default.createElement(a.Icon,{link:!0,name:"key","data-testid":c,style:{color:n.SSB_COLORS.YELLOW},onClick:()=>u(!0)})},o.default.createElement(a.Header,{size:"large",style:n.SSB_STYLE},o.default.createElement(a.Icon,{name:"key",style:{color:n.SSB_COLORS.YELLOW}}),o.default.createElement(a.Header.Content,null,d.PSEUDO_CONFIG[r],o.default.createElement(a.Header.Subheader,null,e))),o.default.createElement(a.Modal.Content,{style:n.SSB_STYLE},o.default.createElement("pre",null,JSON.stringify(l,null,2)))):null}const s=(e,t,l)=>{switch(l){case"string":return e.sort(((e,l)=>e.hasOwnProperty(t)&&l.hasOwnProperty(t)?e[t].localeCompare(l[t]):e.hasOwnProperty(t)?e[t].localeCompare(""):l.hasOwnProperty(t)?"".localeCompare(l[t]):0));case"timestamp":return e.sort(((e,l)=>e.id.hasOwnProperty(t)&&l.id.hasOwnProperty(t)?new Date(l.id[t]-1e3)-new Date(e.id[t]-1e3):0));case"nestedString":return e.sort(((e,l)=>e.id.hasOwnProperty(t)&&l.id.hasOwnProperty(t)?e.id[t].localeCompare(l.id[t]):0));default:return e}},C=(e,t=!1)=>{if(void 0!==e){const l=new Date(e-1e3),a={hour:"2-digit",minute:"2-digit"};return t&&(a.second="2-digit"),`${l.toLocaleDateString()} - ${l.toLocaleTimeString([],a)}`}return e},O={CATALOGS:"catalogs",CATALOG_OBJECT:{ENUM:["valuation","state","type"],OBJECT:{NAME:"id",STRING:["path","timestamp"]},STRING:["parentUri"]},GET_HEALTH:"/health/ready",GET_CATALOGS:"/catalog",GET_CATALOGS_BY_PREFIX:e=>`${O.GET_CATALOGS}/${e}`},f={OPEN:n.SSB_COLORS.BLUE,INTERNAL:n.SSB_COLORS.GREEN,SHIELDED:n.SSB_COLORS.YELLOW,SENSITIVE:n.SSB_COLORS.RED};function g({catalogs:e,handleSort:t,language:l,sortedBy:r,sortDirection:i}){return o.default.createElement(a.Table,{celled:!0,selectable:!0,sortable:!0,basic:"very",compact:"very",size:"large"},o.default.createElement(a.Table.Header,null,o.default.createElement(a.Table.Row,null,o.default.createElement(a.Table.HeaderCell,{onClick:()=>t(O.CATALOG_OBJECT.OBJECT.STRING[0],"nestedString"),sorted:r===O.CATALOG_OBJECT.OBJECT.STRING[0]?i:null},d.PATH[l]),o.default.createElement(a.Table.HeaderCell,{onClick:()=>t(O.CATALOG_OBJECT.OBJECT.STRING[1],"timestamp"),sorted:r===O.CATALOG_OBJECT.OBJECT.STRING[1]?i:null},d.TIMESTAMP[l]),o.default.createElement(a.Table.HeaderCell,{onClick:()=>t(O.CATALOG_OBJECT.ENUM[2],"string"),sorted:r===O.CATALOG_OBJECT.ENUM[2]?i:null},d.TYPE[l]),o.default.createElement(a.Table.HeaderCell,{onClick:()=>t(O.CATALOG_OBJECT.ENUM[0],"string"),sorted:r===O.CATALOG_OBJECT.ENUM[0]?i:null},d.VALUATION[l]),o.default.createElement(a.Table.HeaderCell,{onClick:()=>t(O.CATALOG_OBJECT.ENUM[1],"string"),sorted:r===O.CATALOG_OBJECT.ENUM[1]?i:null},d.STATE[l]),o.default.createElement(a.Table.HeaderCell,null,d.PSEUDO_CONFIG[l]))),o.default.createElement(a.Table.Body,null,e.map((({id:e,pseudoConfig:t,state:r,type:i,valuation:c},d)=>o.default.createElement(a.Table.Row,{key:d},o.default.createElement(a.Table.Cell,{style:{fontWeight:"bold"}},e[O.CATALOG_OBJECT.OBJECT.STRING[0]].length>100?o.default.createElement(a.Popup,{basic:!0,flowing:!0,trigger:o.default.createElement("div",null,n.truncateString(e[O.CATALOG_OBJECT.OBJECT.STRING[0]],100))},e[O.CATALOG_OBJECT.OBJECT.STRING[0]]):e[O.CATALOG_OBJECT.OBJECT.STRING[0]]),o.default.createElement(a.Table.Cell,null,C(e[O.CATALOG_OBJECT.OBJECT.STRING[1]])),o.default.createElement(a.Table.Cell,null,i),o.default.createElement(a.Table.Cell,{style:{color:f[c]}},c),o.default.createElement(a.Table.Cell,null,r),o.default.createElement(a.Table.Cell,{textAlign:"center"},o.default.createElement(T,{language:l,pseudoConfig:t,catalog:e[O.CATALOG_OBJECT.OBJECT.STRING[0]]})))))))}return e.CatalogViewer=function({restApi:e,language:l}){const[r,c]=t.useState(""),[d,T]=t.useState([]),[f,A]=t.useState(""),[S,m]=t.useState([]),[L,B]=t.useState("ascending"),[G,y]=t.useState(O.CATALOG_OBJECT.OBJECT.STRING[0]),[{data:_,loading:p,error:b},R]=i.default(`${e}${O.GET_CATALOGS}`);return t.useEffect((()=>{if(!p&&!b&&void 0!==_)if(Array.isArray(_[O.CATALOGS]))try{A(C(Date.now(),!0)),m((e=>{const t=e.map((e=>e.id.path.split("/").filter((e=>""!==e)).slice(0,1))),l=[].concat.apply([],t).reduce(((e,t)=>(t in e?e[t]++:e[t]=1,e)),{});return Object.entries(l).sort(((e,t)=>t[1]-e[1])).filter((e=>e[1]>=3))})(_[O.CATALOGS])),T(s(_[O.CATALOGS],O.CATALOG_OBJECT.OBJECT.STRING[0],"nestedString"))}catch(e){console.log(e)}else console.log("Received catalogs is not of Array format, received was:"),console.log(_)}),[_,b,p]),t.useEffect((()=>{void 0!==_&&Array.isArray(_[O.CATALOGS])&&(e=>{try{y(""),B("ascending"),T(_[O.CATALOGS].filter((({id:t})=>t[O.CATALOG_OBJECT.OBJECT.STRING[0]].includes(e))))}catch(e){console.log(e)}})(r)}),[_,r]),o.default.createElement(o.default.Fragment,null,o.default.createElement(u,{error:b,loading:p,refetch:R,filterBy:r,language:l,fetchTime:f,setFilterBy:c}),o.default.createElement(a.Divider,{hidden:!0}),p?o.default.createElement(a.Loader,{active:!0,inline:"centered"}):b?o.default.createElement(n.ErrorMessage,{error:b,language:l}):o.default.createElement(o.default.Fragment,null,o.default.createElement(E,{commonPrefixes:S,length:_[O.CATALOGS].length,setFilterBy:c}),o.default.createElement(a.Divider,{hidden:!0}),o.default.createElement(g,{language:l,sortedBy:G,catalogs:d,handleSort:(e,t)=>{e===G?(B("ascending"===L?"descending":"ascending"),T(d.reverse())):(y(e),T(s(d,e,t)))},sortDirection:L})))},Object.defineProperty(e,"__esModule",{value:!0}),e}({},React,axiosHooks,semanticUiReact,daplaJsUtilities);
